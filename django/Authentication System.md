### Authentication System

: 장고의 인증 시스템

>django 인증 시스템은 인증과 권한 부여를 함께 제공 처리하며, 이러한 기능이 어느 정도 결합되어 일반적으로 인증 시스템이라고 한다.

`django.contrib.auth`

- 인증 프레임워크의 핵심과 기본 모델을 포함

`django.contrib.contenttypes`

- 사용자가 생성한 모델과 권한을 연결할 수 있다.



Authentication (인증)

: 신원 확인, 사용자가 자신이 누군지 확인

Authorization (권한, 허가)

: 권한 부여, 인증된 사용자가 수행할 수 있는 작업을 결정



### http

##### : hyper text transfer protocol

- HTML 문서와 같은 리소스 들을 가져올 수 있게 해주는 프로토콜 ( 규칙, 규약)
- 웹에서 이루어지는 모든 데이터 교환의 기초
- 클라이언트 - 서버 프로토콜이기도 함

##### 특징

- 비연결지향
  - 서버는 요청에 대한 응답을 보낸 후 연결을 끊음
- 무상태 
  - 연결을 끊는 순간 클라이언트와 서버 간의 통신이 끝나며 상태 정보가 유지되지 않음
  - 클라이언트와 서버가 주고받는 메세지들은 서로 완전히 독립적임

-> 클라이언트와 서버의 지속적인 관계를 유지하기 위해 쿠키와 세션이 존재한다.



쿠키

- 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각
- 사용자가 웹사이트를 방문할 경우 해당 웹사이트의 서버를 통해 사용자의 컴퓨터에 설치되는 작은 기록 정보 파일
  - 브라우저는 쿠키를 로컬에 key,value의 데이터 형식으로 저장
  - 쿠키를 저장했다가, 동일한 서버에 재요청 시 저장된 쿠키를 함께 전송
- http 쿠키는 상태가 있는 세션을 만들어 줌
- 쿠키는 두 요청이 동일한 브라우저에서 들어왔는지 아닌지를 판단할 때 주로 사용
  - 이를 통해 사용자의 로그인 상태를 유지할 수 있다.
  - 상태가 없는 프로토콜에서 상태 정보를 기억시켜준다.

-> 웹 페이지에 접속하면 요청한 웹 페이지를 받으며 쿠키를 저장하고, 클라이언트가 같은 서버에 재요청 시 요청과 함께 쿠키도 함께 전송



쿠키의 사용 목적

- 세션 관리 : 로그인, 아이디 자동완성, 공지 하루 안보기, 팝업 체크, 장바구니 등의 정보 관리
- 개인화 : 사용자 선호, 테마 등의 설정
- 트레킹 : 사용자 행동을 기록 및 분석



세션

- 사이트와 특정 브라우저 사이의 상태를 유지하는 것
- 클라이언트가 서버에 접속하면 서버가 특정 session id를 발급하고, 클라이언트는 발급 받은 session id를 쿠키에 저장
  - 클라이언트가 다시 서버에 접속하면 요청과 함께 쿠키를 서버에  전달
  - 쿠키는 요청 때마다 서버에 함께 전송되므로 서버에서 session id를 확인해 알맞은 로직을 처리
- id는 세션을 구별하기 위해 필요, 쿠키에는 id만 저장됨



session in django

- 장고의 세션은 미들웨어를 통해 구현됨
- 장고의 database-backed sessions 저장 방식을 기본 값으로 사용
- 장고는 특정 session id를 포함하는 쿠키를 사용해서 각각의 브라우저와 사이트가 연결된 세션을 알아냄
  - django_session테이블에 저장됨
- 모든 것을 세션으로 사용하려고 하면 사용자가 많을 때 서버에 부하가 걸릴 수 있다.

Authenication System in MIDDLEWARE

- SessionMiddleware
  - 요청 전반에 걸쳐 세션을 관리
- AutenticationMiddleware
  - 세션을 사용해서 사용자를 요청과 연결



미들웨어?

- http요청과 응답 처리 중간에서 작동하는 시스템
- 장고는 http 요청이 들어오면 미들웨어를 거쳐 해당 url에 등록되어 있는 view로 연결해주고, http 응답 역시 미들웨어를 거쳐서 내보냄
- 주로 데이터 관리, 애플리케이션 서비스, 메시징, 인증 및 api관리를 담당





1. 로그인 시도
2. 로그인 성공, 세선 아이디 발급해줌
3. 브라우저에 세션 아이디 저장
4. 다른 페이지로 요청을 보낼 때 함께 보내줌
5. 로그인 한 상태로 유지해줌









프로젝트 시작

1. 가상환경 구축

2. 앱 프로젝트 시작

3. 앱 setting에 등록, url 설정

   최상단 urls.py에 해당 디렉토리 경로 include로 넣어주기

   앱 디렉토리에 urls.py 만들어서 import 고대로 복분해서 넣고

   urlpatterns, app_name 넣기



----

