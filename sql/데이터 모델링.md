# 데이터 모델링의 이해

### 데이터 모델링

##### 데이터 모델링이란?

- 정보 시스템을 구축하기 위한 데이터 관점의 업무 분석 기법

- 데이터에 대해 약속된 표기법으로 표현하는 과정

- 데이터베이스를 구축하기 위한 분석/ 설계의 과정

- 시스템 구현을 포함한 업무 분석 및 업무 형상화의 목적도 가짐

- 일정한 표기법에 의해 표현함으로써, 정보 시스템 구죽의 대상이 되는 업무 내용을 정확하게 분석

- 분석된 모델로 실제 데이터베이스를 생성해 개발 및 데이터 관리에 사용

- 업무의 설명에 사용되기도 한다.

  

##### 데이터 모델링 유의사항

- 중복 : 같은 정보 여러장소 저장 X
- 비유연성 : 데이터 정보와 프로세스 **분리**해서 프로셋 변화가 변화를 일으킬 기능성 방지
- 비일관성 : 데이터 간의 **상호 연관관계**를 **명확하게 정의**하는 것이 필요

-> 중복이 없어야 하고 유연해야 하고 일관적이여야 한다!



##### 데이터 모델링 관점

- 데이터 : 구조 분석 / 정적 분석

- 프로세스 : 시나리오 분석 / 도메인 분석 / 동적 분석

- 데이터와 프로세스 관점 : CRUD 분석

  

##### 데이터베이스 모델링시 고려사항

- 파급효과, 복잡한 요구사항을 간결하게 표현, 데이터 품질

  

##### 데이터 모델링 3가지 요소

- Things 객체 / Attributes 속성 / Relationship 관계



##### 데이터 모델링 단계 (개논물)

- 개념적 모델링
  - 업무 중심적 포괄적 모델링
  - 전사적 개념 모델링
  - 추상화 수준이 높음

- 논리적 모델링
  - 정규화를 수행해 모델의 독립성을 확보
  - 식별자를 정의해 key, 속성, 관계 등을 표현
  - **재사용성**이 높다.
  - 데이터 모델링이 최종적으로 완료된 상태
- 물리적 모델링
  - 어떻게 이식할 것인가
  - 성능, 보안, 가용성등의 물리적 성격을 고려해 데이터베이스를 실제로 구축



### ERD

##### ERD 작성 절차

1. 엔티티를 그린다
2. 엔티티를 배치 ( 중요 엔티티는 왼쪽상단)
3. 엔티티간 관계를 설정
4. 관계명을 기술
5. 관계의 참여도 기술
6. 관계의 필수여부 기술

##### ERD 작성시 고려사항

- 독립성 / 요구사항 표현 / 데이터 품질 확보



### 3-Level-Schema

- 외부 스키마
  - 사용자 관점, 응용프로그램 접근
- 개념 스키마
  - 설계자 관점, **통합 관점**, 통합 데이터베이스
  - 모든 사용자 관점을 통합한 조직 전체 관점의 통합적 표현
  - 모든 응용시스템들이나 사용자들이 필요로하는 데이터를 통합한 조직 전체의 DB를 기술한 것으로 DB에 저장되는 데이터와 그들 간의 관계를 표현하는 스키마
- 내부 스키마
  - 개발자 관점, 물리적 저장구조

##### 

### Entity

##### 엔티티의 특징

- 해당 업무에 필요하고 관리하고자 하는 정보
- 유일한 식별자에 의해 식별 가능
- 영속적으로 존재하는 **두개 이상의 인스턴스 집합**
- 업무 프로세스에 의해 이용
- 반드시 **두개 이상의 속성**이 존재
- 속성도 집합이다.
- 다른 엔티티와 최소한 **한개 이상의 관계**를 갖음
- 생략 가능한 엔티티관계 : 통계성 엔티티, 코드성 엔티티, 시스템 내부 엔티티

##### 엔티티의 공통점

- 명사 / 관리되어야 할 정보 / 저장이 필요

##### 엔티티 종류

- 유/무형 : 유형 / 개념 / 사건
- 발생 시점 : 기본(key, 독립적) / 중심(기본에 의해 발생) / 행위( 두개이상의 부모 엔티티 가짐, 데이터 양이 가장 많다.)



### Attirbute

##### 속성이란?

- 업무에서 필요로 하는 인스턴스에서 관리하고자 하는 의미상 **더 분리되지 않는 최소의 단위** 
- 하나의 값만 갖는다.

##### 속성의 종류

- 분해 여부 : 단일 (하나의 의미) / 복합 (여러개의 의미) / 다중값 (여러개의 값)
- 특성 : 기본 / 설계 (코드 부여) / 파생 (통계 값)

### Relation

##### 관계의 종류

- 존재관계 / 행위관계

##### 데이터 모델링의 관계

- 존재관계와 행위관계까 존재하지만 ERD에서는 구분하지 않고 **단일화**된 표기법 사용
- UML에는 클래스다이어그램의 관계중 연산관계와 의존관계를 실선과 점선의 표기법을 사용

##### 관계의 표기법

- 관계명  / 관계차수 / 선택성

##### 관계 읽기

- 기준 엔티티를 각 읽는다.
- 대상 엔티티의 관계참여도를 읽는다.
- 관계선택사양과 관계이름을 읽는다.

##### 엔티티 사이에 정의한 관계 체크사항

- 관심있는 연관 규칙이 존재하는가?
- 정보의 조합이 발생하는가?
- 업무 기술서, 장표에 관계 연결을 가능하게 하는 동사가 있는가?
- 업무 기술서, 장표에 관계 연결 규칙이 서술되어 있는가?



### IDENTIFIER

##### 주 식별자 특징

- 유일성, 최소성 만족
- 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다.
- 엔티티 대표 가능
- 인스턴스 유일 식별 가능
- 자주 변경 X

##### 식별자의 종류

- 대표성 여부 : 주 식별자, 보조 식별자 (후보키)
- 생성 여부 : 내부 식별자, 외부 식별자 (FK) /  ( 스스로 생성 되었나?)
- 속성의 수 : 단일 식별자, 복합 식별자 (두개 이상의 속성)
- 대체 여부 : 본질 식별자, 인조 식별자 (일련번호 , 범용적)
  - 인스턴스의 탄생과 함꼐 업무적으로 부여되는 사원 인스턴스의 본질적인 속성에 해당하는 사번 같은 것은 인조 가 아닌 **본질** 식별자이다.

##### 식별자와 비식별자관계 비교

| 항목               | 식별자 관계                                                  | 비식별자 관계                                                |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 목적               | 강한 연결관계 표현                                           | 약한 연결관계 표현                                           |
| 자식 주식별자 영향 | 자식 주실별자의 구성에 포함됨                                | 자식 일반 속성에 포함됨                                      |
| 표기법             | 실선 표현                                                    | 점선 표현                                                    |
| 연결 고려사항      | - 반드시 부모 엔터티 종속<br/>- 자식 주식별자 구성에 부모 주식별자 포함 필요<br />- 상속받은 주식별자 속성을 타엔티티에 이전 필요 | - 약한 종속 관계<br />- 자식 주식별자 구성을 독립적으로 구성<br />- 자식 주식별자 구성에 부모 주식별자 부분 필요<br />- 상속받은 주식별자 속성을 타 엔티티에 차단 필요<br />- 부모 쪽의 관계참여가 선택 관계 |



##### 도메인

- 속성이 가질 수 있는 값의 범위
- 엔티티 내에서 속성에 대한 데이터 타입과 크기 그리고 제약사항을 지정하는 것
- 릴레이션에서 모든 속성들의 모데인은 원자값을 갖는다.
- 실제 속성 값의 합법 여부를 시스템이 검사하는 데 이용
- 속성명과 반드시 동일할 필요는 없다.

##### 좋은 모델링의 조건

- 중복 배제, Business Rule, 완전성

##### 카디널리티

- 하나의 릴레이션에서 튜플의 전체 개수

##### 선택도

- 특정 조건에 의해 선택 될 레코드의 비율
- 조건이 요청한 값의 범위 / 전체 값

##### Row chaining

- 행위 길이가 너무 길어 데이터 블록 하나에 데이터가 저장되지 않고 두개이상의 블록에 걸쳐 하나의 행이 저장

##### Row migration

- 데이터 블록에서 수정이 발생하면 수정된 데이터를 해당 블록에 저장하지 못하고 다른 블록의 빈공간을 찾아 저장하는 방식





